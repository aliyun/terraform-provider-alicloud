groups:
  - name: All
    jobs:
      - All
      # ECS
      - Regions
      - Zones
      - Dataworks
      - Hbr
      - Sae
      - EventBridge
      # ESS
      - Ess
      # Container Service
      - CS
      # Container Registry
      - CR
      # Function Compute
      - FC
      # OSS
      - Oss
      # VPC
      - Vpc
      - EIP
      - Elasticsearch
      - Cddc
      - Arms
      - Scdn
      - Lindorm
      - Ecd
      - CommonBandwidth
      - Cen
      - Vpn
      - SslVpn
      # SLB
      - Slb
      # Database
      # Rds
      - ALB
      - Rds
      # Redis and Memcache
      - KVStore
      - DRDS
      - Gpdb
      # RAM
      - Ram
      # Msc and Pvtz
      - Msc
      # PrivateZone
      - Pvtz
      # Datahub
      - Datahub
      # Cdn
      - Cdn
      # Dcdn
      - Dcdn
      # Api Gateway
      - Apigateway
      # Mns
      - Mns
      # Rocket MQ
      - Ons
      # Kafka
      - Alikafka
      # Nas
      - Nas
      # Ots
      - Ots
      # Kms
      - Kms
      # Sls
      - Log
      # Actiontrail
      - Actiontrail
      # SSL Certificate
      - SslCertificates
      # MongoDB
      - MongoDB
      # Ddoscoo
      - Ddoscoo
      - Ddosbgp
      # Cms
      - Cms
      # E-MapReduce
      - Emr
      # Cloud Connect network
      - CloudConnectNetwork
      # Smart Access Gateway
      - Sag
      - YundunDbaudit
      - Bastionhost
      - Market
      - PolarDB
      - HBase
      - Cassandra
      - Adb
      - Maxcompute
      - Dms
      - Waf
      - Edas
      - ResourceManager
      - Ecs
      - Config
      - Alidns
      - MSE
      - Fnf
      - Ros
      - Privatelink
      - Tsdb
      - Eci
      - Oos
      - Amqp
      - CloudFirewall
      - SDDP
      - DirectMail
      - SAS
      - DFS
      - Ehpc
      - IMP
      - Sweeper-1
      - Sweeper-2
      - Sweeper-3
      - Sweeper-4
      - Sweeper-5
      - SweeperAfter
      - Provider

  - name: Elastic Computing
    jobs:
      # ECS
      - Regions
      - Zones
      - Dataworks
      - Hbr
      - Lindorm
      - Sae
      - EventBridge
      - Ecs
      # ESS
      - Ess
      # Container Service
      - CS
      # Container Registry
      - CR
      # Function Compute
      - FC
      - Fnf
      - Ros
      - Eci
      - Oos
      - Sweeper-1
      - Sweeper-2
      - Sweeper-3
      - Sweeper-4
      - Sweeper-5
      - SweeperAfter

  - name: Storage and CDN
    jobs:
      # Nas
      - Nas
      # OSS
      - Oss
      # Cdn
      - Cdn
      # Dcdn
      - Dcdn
      # Ots
      - Ots
      - Sweeper-1
      - Sweeper-2
      - Sweeper-3
      - Sweeper-4
      - Sweeper-5
      - SweeperAfter

  - name: Databases
    jobs:
      # Database
      - ALB
      - Rds
      - KVStore
      - DRDS
      # MongoDB
      - MongoDB
      - Gpdb
      - PolarDB
      - HBase
      - Cassandra
      - Adb
      - Dms
      - Tsdb
      - Sweeper-1
      - Sweeper-2
      - Sweeper-3
      - Sweeper-4
      - Sweeper-5
      - SweeperAfter

  - name: Networking
    jobs:
      # VPC
      - Vpc
      - EIP
      - Cddc
      - Arms
      - Scdn
      - Lindorm
      - Ecd
      - CommonBandwidth
      - Cen
      - Vpn
      - SslVpn
      # SLB
      - Slb
      # Pvtz
      - Pvtz
      # Cloud Connect network
      - CloudConnectNetwork
      - Sag
      - MSE
      - Privatelink
      - Sweeper-1
      - Sweeper-2
      - Sweeper-3
      - Sweeper-4
      - Sweeper-5
      - SweeperAfter

  - name: Domain & Hosting
    jobs:
      # Msc and Pvtz
      - Msc
      - Alidns
      - Pvtz
      - IMP
      - Sweeper-1
      - Sweeper-2
      - Sweeper-3
      - Sweeper-4
      - Sweeper-5

  - name: Application Service
    jobs:
      # Api Gateway
      - Apigateway
      # Sls
      - Log
      - Sweeper-1
      - Sweeper-2
      - Sweeper-3
      - Sweeper-4
      - Sweeper-5
      - SweeperAfter

  - name: Management and Monitoring
    jobs:
      # RAM
      - Ram
      # Kms
      - Kms
      # Actiontrail
      - Actiontrail
      # Cms
      - Cms
      - ResourceManager
      - Config
      - Sweeper-1
      - Sweeper-2
      - Sweeper-3
      - Sweeper-4
      - Sweeper-5

  - name: Middleware
    jobs:
      # Mns
      - Mns
      # Rocket MQ
      - Ons
      # Kafka
      - Alikafka
      - Amqp
      - Edas
      - Sweeper-1
      - Sweeper-2
      - Sweeper-3
      - Sweeper-4
      - Sweeper-5

  - name: DTplus Basic Service
    jobs:
      # Datahub
      - Datahub
      - Elasticsearch
      # E-MapReduce
      - Emr
      - Sweeper-1
      - Sweeper-2
      - Sweeper-3
      - Sweeper-4
      - Sweeper-5

  - name: Security
    jobs:
      # SSL Certificate
      - SslCertificates
      # Ddoscoo
      - Ddoscoo
      - Ddosbgp
      - YundunDbaudit
      - Bastionhost
      - Waf
      - Sweeper-1
      - Sweeper-2
      - Sweeper-3
      - Sweeper-4
      - Sweeper-5
      - SweeperAfter

shared:
  - &clone-provider
    get: terraform-provider-alicloud
    resource: terraform-provider-alicloud
    trigger: false

  - &get-aliyun-cli
    get: aliyun-cli
    resource: aliyun-cli

  - &run
    task: terraform ci
    file: terraform-provider-alicloud/ci/tasks/run.yml
    params: &run-params
      ALICLOUD_ACCESS_KEY: {{alicloud_access_key}}
      ALICLOUD_SECRET_KEY: {{alicloud_secret_key}}
      ALICLOUD_REGION: {{alicloud_region}}
      ALICLOUD_ACCOUNT_SITE: {{alicloud_account_site}}
      TEST_CASE_CODE: ""
      SWEEPER: false
      CHECKOUT_REGION: "true"
      ACCESS_URL: {{access_ci_url}}
      ACCESS_USER_NAME: {{access_ci_user_name}}
      ACCESS_PASSWORD: {{access_ci_password}}
      DING_TALK_TOKEN: {{ding_talk_token}}
      ALICLOUD_ACCOUNT_ID: {{alicloud_accound_id}}
      ALICLOUD_RESOURCE_GROUP_ID: {{alicloud_resource_group_id}}

jobs:
  - name: Sweeper-1
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 2230
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          SWEEPER: true
          TEST_CASE_CODE: "-"

  - name: Sweeper-2
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 2245
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          SWEEPER: true
          TEST_CASE_CODE: "-"

  - name: Sweeper-3
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 23
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          SWEEPER: true
          TEST_CASE_CODE: "-"

  - name: Sweeper-4
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 2315
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          SWEEPER: true
          TEST_CASE_CODE: "-"

  - name: Sweeper-5
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 2330
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          SWEEPER: true
          TEST_CASE_CODE: "-"

  - name: All
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 00Tue
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "All"

  - name: Apigateway
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 00Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Apigateway"
          SWEEPER_CODE: "alicloud_api_gateway"

  - name: Cdn
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 01Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "CdnDomain"
          CONCOURSE_TARGET_TRIGGER_PIPELINE_JOB_NAME: "Cdn"

  - name: Cen
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 02Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Cen"
          SWEEPER_CODE: "alicloud_cen_instance"

  - name: CommonBandwidth
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 03
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "CommonBandwidth"
          SWEEPER_CODE: "alicloud_common_bandwidth_package"

  - name: CS
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 04
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "CS"
          SWEEPER_CODE: "alicloud_cs_swarm"

  - name: Datahub
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 05
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Datahub"
          SWEEPER_CODE: "alicloud_datahub_project"

  - name: ALB
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 06Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "ALB"
          SWEEPER_CODE: "alicloud_alb"

  - name: Rds
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 06Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Rds"
          SWEEPER_CODE: "alicloud_db_instance"

  - name: Amqp
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 08Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Amqp"

  - name: Msc
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 09Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Msc"

  - name: DRDS
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 10Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "DRDS"

  - name: EIP
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 11Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Eip"
          CONCOURSE_TARGET_TRIGGER_PIPELINE_JOB_NAME: "EIP"
          SWEEPER_CODE: "alicloud_eip"

  - name: Ess
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 12Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ess"
          SWEEPER_CODE: "alicloud_ess_scaling_group"
  #
  - name: Hbr
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 13Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Hbr"
          SWEEPER_CODE: "alicloud_hbr"

  - name: FC
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 14
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "FC"
          SWEEPER_CODE: "alicloud_fc_service"

  - name: Dataworks
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 15
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Dataworks"

  - name: Kms
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 17Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Kms"

  - name: Log
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 18
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Log"
          SWEEPER_CODE: "alicloud_log_project"

  - name: Zones
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 20Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Zones"

  - name: KVStore
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0030Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "KVStore"
          SWEEPER_CODE: "alicloud_kvstore_instance"

  - name: Elasticsearch
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0130Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Elasticsearch"

  - name: CR
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0330Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "CR"

  #  - name: NetworkInterface
  #    plan:
  #      - <<: *clone-provider
  #      - get: trigger
  #        trigger: false
  #        resource: 0430Thu
  #      - aggregate:
  #          - *get-aliyun-cli
  #      - <<: *run
  #        params:
  #          <<: *run-params
  #          TEST_CASE_CODE: "NetworkInterface"
  #          SWEEPER_CODE: "alicloud_network_interface"

  - name: Oss
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0530Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Oss"
          SWEEPER_CODE: "alicloud_oss_bucket"

  - name: Ots
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0630Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ots"
          SWEEPER_CODE: "alicloud_ots_instance"

  - name: Pvtz
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0930Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Pvtz"
          SWEEPER_CODE: "alicloud_pvtz_zone"

  - name: Ram
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0830Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ram"
          SWEEPER_CODE: "alicloud_ram"

  - name: Regions
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0930
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Regions"

  - name: Arms
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1030Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Arms"
          SWEEPER_CODE: "alicloud_arms"

  - name: Cddc
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1130Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Cddc"
          SWEEPER_CODE: "alicloud_cddc"

  - name: Scdn
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1230Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Scdn"
          SWEEPER_CODE: "alicloud_scdn_domain"

  - name: Lindorm
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1330Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Lindorm"

  - name: Slb
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1430Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Slb"
          SWEEPER_CODE: "alicloud_slb_load_balancer"

  - name: SslVpn
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1630
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "SslVpn"

  - name: Vpc
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1730Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Vpc"
          SWEEPER_CODE: "alicloud_vpc"

  - name: Vpn
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1830
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Vpn"

  - name: Mns
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1930Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Mns"

  - name: Nas
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 2030Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Nas"

  - name: Actiontrail
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 00
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Actiontrail"

  - name: SslCertificates
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 01
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "SslCertificates"

  - name: MongoDB
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 02Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "MongoDB"

  - name: Ddoscoo
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 03
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ddoscoo"

  - name: Sae
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 04
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Sae"

  - name: EventBridge
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 05
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "EventBridge"

  - name: Cms
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 06Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Cms"

  - name: Gpdb
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0730Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Gpdb"

  - name: Ons
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 08Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ons"

  - name: Alikafka
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 09Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Alikafka"

  - name: Ddosbgp
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 10
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ddosbgp"

  - name: Provider
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 11
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Provider"

  - name: Emr
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 12Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Emr"

  - name: CloudConnectNetwork
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 13Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "CloudConnectNetwork"

  - name: Sag
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 14Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Sag"

  - name: YundunDbaudit
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 15
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "YundunDbaudit"
  - name: Bastionhost
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 16
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Bastionhost"

  - name: Market
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 17Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Market"

  - name: PolarDB
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 17Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "PolarDB"

  - name: HBase
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0030Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "HBase"

  - name: Adb
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0130Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Adb"


  - name: Maxcompute
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0230Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Maxcompute"

  - name: Dms
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0330Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Dms"

  - name: Waf
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0430
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Waf"

  - name: Edas
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0530
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Edas"

  - name: ResourceManager
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0630Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "ResourceManager"

  - name: Ecs
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0730Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ecs"

  - name: Dcdn
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0830Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Dcdn"

  - name: Cassandra
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0930
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Cassandra"

  - name: Config
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1030Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Config"

  - name: Alidns
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1130
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Alidns"

  - name: MSE
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1230Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "MSE"

  - name: Fnf
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1330Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Fnf"

  - name: Ros
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1430Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ros"

  - name: Privatelink
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1530Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Privatelink"

  - name: CloudFirewall
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1630Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "CloudFirewall"

  - name: Tsdb
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1630Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Tsdb"

  - name: Eci
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1630
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Eci"

  - name: Oos
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1630Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Oos"

  - name: Ecd
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1630Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ecd"

  - name: SDDP
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1730Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "SDDP"

  - name: DirectMail
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 1830Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "DirectMail"

  - name: SAS
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 01Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "SAS"

  - name: DFS
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 02Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "DFS"

  - name: Ehpc
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0230Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ehpc"

  - name: IMP
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0330Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "IMP"

  - name: SweeperAfter
    plan:
      - get: terraform-provider-alicloud
        resource: terraform-provider-alicloud
        trigger: false
        passed: [
            Hbr, Ess, CS, FC, Ecs,
            Vpc, EIP, Cddc, Arms, Scdn, Amqp, CommonBandwidth,
            Slb, ALB, KVStore, DRDS, Apigateway, Ots, Elasticsearch, Vpn, SslVpn, MongoDB, Sae, EventBridge
        ]
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          SWEEPER: true
          TEST_CASE_CODE: "-"
          TEST_SWEEPER_CASE_CODE: "alicloud_vpc"

resources:
  - name: terraform-provider-alicloud
    type: git
    source:
      uri: https://github.com/aliyun/terraform-provider-alicloud.git
      branch: master

  - name: aliyun-cli
    type: s3
    source:
      access_key_id: {{aliyun_cli_access_key}}
      secret_access_key: {{aliyun_cli_secret_key}}
      bucket: {{aliyun_cli_bucket}}
      regexp: .*-cli-linux-3\.0\.(\d+)-amd64\.tgz
      region_name: {{aliyun_cli_region}}
      endpoint: oss-((aliyun_cli_region)).aliyuncs.com

  - name: 00
    type: time
    source:
      start: 00:00 AM
      stop: 12:00 PM
      days: [Sunday, Tuesday, Thursday]
      location: {{time_location}}

  #- name: 0030
  #  type: time
  #  source:
  #    start: 00:30 AM
  #    stop: 10:50 PM
  #    #    days: [Sunday]
  #    location: {{time_location}}

  - name: 01
    type: time
    source:
      start: 01:00 AM
      stop: 10:50 PM
      #    days: [Sunday]
      location: {{time_location}}

  #  - name: 0130
  #    type: time
  #    source:
  #      start: 01:30 AM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  #  - name: 02
  #    type: time
  #    source:
  #      start: 02:00 AM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  #  - name: 0230
  #    type: time
  #    source:
  #      start: 02:30 AM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  - name: 03
    type: time
    source:
      start: 03:00 AM
      stop: 10:50 PM
      #    days: [Sunday]
      location: {{time_location}}

  #  - name: 0330
  #    type: time
  #    source:
  #      start: 03:30 AM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  - name: 04
    type: time
    source:
      start: 04:00 AM
      stop: 10:50 PM
      #    days: [Sunday]
      location: {{time_location}}

  - name: 0430
    type: time
    source:
      start: 04:30 AM
      stop: 10:50 PM
      #    days: [Sunday]
      location: {{time_location}}

  - name: 05
    type: time
    source:
      start: 05:00 AM
      stop: 10:50 PM
      #    days: [Sunday]
      location: {{time_location}}

  - name: 0530
    type: time
    source:
      start: 05:30 AM
      stop: 10:50 PM
      #    days: [Sunday]
      location: {{time_location}}

  #  - name: 06
  #    type: time
  #    source:
  #      start: 06:00 AM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  #  - name: 0630
  #    type: time
  #    source:
  #      start: 06:30 AM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  #  - name: 07
  #    type: time
  #    source:
  #      start: 07:00 AM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  #  - name: 0730
  #    type: time
  #    source:
  #      start: 07:30 AM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  #  - name: 08
  #    type: time
  #    source:
  #      start: 08:00 AM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  #  - name: 0830
  #    type: time
  #    source:
  #      start: 08:30 AM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  #  - name: 09
  #    type: time
  #    source:
  #      start: 09:00 AM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  - name: 0930
    type: time
    source:
      start: 09:30 AM
      stop: 10:50 PM
      #    days: [Sunday]
      location: {{time_location}}

  - name: 10
    type: time
    source:
      start: 10:00 AM
      stop: 10:50 PM
      #    days: [Sunday]
      location: {{time_location}}

  #  - name: 1030
  #    type: time
  #    source:
  #      start: 10:30 AM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  - name: 11
    type: time
    source:
      start: 11:00 AM
      stop: 10:50 PM
      #    days: [Sunday]
      location: {{time_location}}

  - name: 1130
    type: time
    source:
      start: 11:30 AM
      stop: 10:50 PM
      #    days: [Sunday]
      location: {{time_location}}

  #  - name: 12
  #    type: time
  #    source:
  #      start: 12:00 AM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  #  - name: 1230
  #    type: time
  #    source:
  #      start: 12:30 AM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  #  - name: 13
  #    type: time
  #    source:
  #      start: 01:00 PM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  #  - name: 1330
  #    type: time
  #    source:
  #      start: 01:30 PM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  - name: 14
    type: time
    source:
      start: 02:00 PM
      stop: 10:50 PM
      #    days: [Sunday]
      location: {{time_location}}

  #  - name: 1430
  #    type: time
  #    source:
  #      start: 02:30 PM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  - name: 15
    type: time
    source:
      start: 03:00 PM
      stop: 10:50 PM
      #    days: [Sunday]
      location: {{time_location}}

  #  - name: 1530
  #    type: time
  #    source:
  #      start: 03:30 PM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  - name: 16
    type: time
    source:
      start: 04:00 PM
      stop: 10:50 PM
      #    days: [Sunday]
      location: {{time_location}}

  - name: 1630
    type: time
    source:
      start: 04:30 PM
      stop: 10:50 PM
      #    days: [Sunday]
      location: {{time_location}}

  #  - name: 17
  #    type: time
  #    source:
  #      start: 05:00 PM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  #- name: 1730
  #  type: time
  #  source:
  #    start: 05:30 PM
  #    stop: 10:50 PM
  #    #    days: [Sunday]
  #    location: {{time_location}}

  - name: 18
    type: time
    source:
      start: 06:00 PM
      stop: 10:50 PM
      #    days: [Sunday]
      location: {{time_location}}

  - name: 1830
    type: time
    source:
      start: 06:30 PM
      stop: 10:50 PM
      #    days: [Sunday]
      location: {{time_location}}

  #- name: 19
  #  type: time
  #  source:
  #    start: 07:00 PM
  #    stop: 10:50 PM
  #    #    days: [Sunday]
  #    location: {{time_location}}

  #  - name: 1930
  #    type: time
  #    source:
  #      start: 07:30 PM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  #  - name: 20
  #    type: time
  #    source:
  #      start: 08:00 PM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  #  - name: 2030
  #    type: time
  #    source:
  #      start: 08:30 PM
  #      stop: 10:50 PM
  #      #    days: [Sunday]
  #      location: {{time_location}}

  #apply to sweeper
  - name: 2230
    type: time
    source:
      start: 10:30 PM
      stop: 11:50 PM
      #    days: [Sunday, Monday, Tuesday, Saturday]
      location: {{time_location}}

  - name: 2245
    type: time
    source:
      start: 10:45 PM
      stop: 11:50 PM
      #    days: [Sunday, Monday, Tuesday, Saturday]
      location: {{time_location}}

  - name: 23
    type: time
    source:
      start: 11:00 PM
      stop: 11:50 PM
      #    days: [Sunday, Monday, Tuesday, Saturday]
      location: {{time_location}}

  - name: 2315
    type: time
    source:
      start: 11:15 PM
      stop: 11:50 PM
      #    days: [Sunday, Monday, Tuesday, Saturday]
      location: {{time_location}}

  - name: 2330
    type: time
    source:
      start: 11:30 PM
      stop: 11:50 PM
      #    days: [Sunday, Monday, Tuesday, Saturday]
      location: {{time_location}}

  - name: 00Tue
    type: time
    source:
      start: 00:00 AM
      stop: 10:50 PM
      days: [Tuesday]
      location: {{time_location}}

  - name: 00Thu
    type: time
    source:
      start: 00:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 01Thu
    type: time
    source:
      start: 01:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 0130Thu
    type: time
    source:
      start: 01:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 02Thu
    type: time
    source:
      start: 02:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 0230Thu
    type: time
    source:
      start: 02:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 0030Thu
    type: time
    source:
      start: 00:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 0330Thu
    type: time
    source:
      start: 03:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  #  - name: 0430Thu
  #    type: time
  #    source:
  #      start: 04:30 AM
  #      stop: 10:50 PM
  #      days: [Thursday]
  #      location: {{time_location}}

  - name: 0530Thu
    type: time
    source:
      start: 05:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 06Thu
    type: time
    source:
      start: 06:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 0630Thu
    type: time
    source:
      start: 06:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  #  - name: 07Thu
  #    type: time
  #    source:
  #      start: 07:00 AM
  #      stop: 10:50 PM
  #      days: [Thursday]
  #      location: {{time_location}}

  - name: 0730Thu
    type: time
    source:
      start: 07:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 08Thu
    type: time
    source:
      start: 08:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}
  - name: 0830Thu
    type: time
    source:
      start: 08:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}
  - name: 09Thu
    type: time
    source:
      start: 09:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 0930Thu
    type: time
    source:
      start: 09:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}
  - name: 10Thu
    type: time
    source:
      start: 10:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}
  - name: 1030Thu
    type: time
    source:
      start: 10:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 11Thu
    type: time
    source:
      start: 11:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 1130Thu
    type: time
    source:
      start: 11:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 12Thu
    type: time
    source:
      start: 12:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 1230Thu
    type: time
    source:
      start: 12:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 13Thu
    type: time
    source:
      start: 01:00 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 1330Thu
    type: time
    source:
      start: 101:30 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 14Thu
    type: time
    source:
      start: 02:00 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 1430Thu
    type: time
    source:
      start: 02:30 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  #  - name: 16Thu
  #    type: time
  #    source:
  #      start: 04:00 PM
  #      stop: 10:50 PM
  #      days: [Thursday]
  #      location: {{time_location}}

  - name: 1630Thu
    type: time
    source:
      start: 04:30 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 1530Thu
    type: time
    source:
      start: 04:30 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 17Thu
    type: time
    source:
      start: 05:00 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 1730Thu
    type: time
    source:
      start: 05:30 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 1830Thu
    type: time
    source:
      start: 06:30 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  #  - name: 19Thu
  #    type: time
  #    source:
  #      start: 07:00 PM
  #      stop: 10:50 PM
  #      days: [Thursday]
  #      location: {{time_location}}

  - name: 1930Thu
    type: time
    source:
      start: 07:30 PM
      stop: 10:50 PM
      days: [ Thursday ]
      location: {{time_location}}

  - name: 20Thu
    type: time
    source:
      start: 08:00 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 2030Thu
    type: time
    source:
      start: 08:30 PM
      stop: 10:50 PM
      days: [ Thursday ]
      location: {{time_location}}