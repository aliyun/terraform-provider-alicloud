groups:
  - name: All
    jobs:
      - All
      - Unit
      # ECS
      - Regions
      - Zones
      - DataWorks
      - HBR
      - SAE
      - EventBridge
      # ESS
      - Ess
      # Container Service
      - CS
      # Container Registry
      - CR
      # Function Compute
      - FC
      # OSS
      - Oss
      # VPC
      - VPC
      - EIP
      - Elasticsearch
      - Cddc
      - ARMS
      - Scdn
      - Lindorm
      - ECD
      - CommonBandwidth
      - Cen
      - VPN
      - SslVpn
      # SLB
      - SLB
      # Database
      # Rds
      - ALB
      - Rds
      # Redis and Memcache
      - KVStore
      - DRDS
      - GPDB
      # RAM
      - RAM
      # Msc and Pvtz
      - Msc
      # PrivateZone
      - Pvtz
      # Datahub
      - Datahub
      # CDN
      - CDN
      # DCDN
      - DCDN
      # Api Gateway
      - Apigateway
      # Mns
      - Mns
      # Rocket MQ
      - Ons
      # Kafka
      - Alikafka
      # NAS
      - NAS
      # Ots
      - Ots
      # KMS
      - KMS
      # Sls
      - Log
      # Actiontrail
      - Actiontrail
      # SSL Certificate
      - SslCertificates
      # MongoDB
      - MongoDB
      # Ddoscoo
      - Ddoscoo
      - Ddosbgp
      # Cms
      - Cms
      # E-MapReduce
      - Emr
      # Cloud Connect network
      - CloudConnectNetwork
      # Smart Access Gateway
      - Sag
      - YundunDbaudit
      - Bastionhost
      - Market
      - PolarDB
      - HBase
      - GraphDatabase
      - ADB
      - Maxcompute
      - DMS
      - WAF
      - Edas
      - ResourceManager
      - Ecs
      - Config
      - Alidns
      - MSE
      - Fnf
      - ROS
      - Privatelink
      - Tsdb
      - Eci
      - OOS
      - Amqp
      - CloudFirewall
      - SDDP
      - DirectMail
      - SAS
      - DFS
      - DBFS
      - Ehpc
      - IMP
      - Ga
      - OpenSearch
      - Eais
      - Sddp
      - SimpleApplicationServer
      - DTS
      - ExpressConnect
      - ServiceMesh
      - ClickHouse
      - CloudSSO
      - SweeperAfter
      - Provider

shared:
  - &clone-provider
    get: terraform-provider-alicloud
    resource: terraform-provider-alicloud
    trigger: false

  - &get-aliyun-cli
    get: aliyun-cli
    resource: aliyun-cli

  - &run
    task: terraform ci
    file: terraform-provider-alicloud/ci/tasks/run.yml
    params: &run-params
      ALICLOUD_ACCESS_KEY: {{alicloud_access_key}}
      ALICLOUD_SECRET_KEY: {{alicloud_secret_key}}
      ALICLOUD_REGION: {{alicloud_region}}
      ALICLOUD_ACCOUNT_SITE: {{alicloud_account_site}}
      TEST_CASE_CODE: ""
      SWEEPER: false
      CHECKOUT_REGION: "true"
      ACCESS_URL: {{access_ci_url}}
      ACCESS_USER_NAME: {{access_ci_user_name}}
      ACCESS_PASSWORD: {{access_ci_password}}
      DING_TALK_TOKEN: {{ding_talk_token}}
      ALICLOUD_ACCOUNT_ID: {{alicloud_accound_id}}
      ALICLOUD_RESOURCE_GROUP_ID: {{alicloud_resource_group_id}}
      CONCOURSE_TARGET: {{alicloud_concourse_target}}
      CONCOURSE_TARGET_URL: {{alicloud_concourse_target_url}}
      CONCOURSE_TARGET_USER: {{alicloud_concourse_target_user}}
      CONCOURSE_TARGET_PASSWORD: {{alicloud_concourse_target_password}}
      CONCOURSE_TARGET_TRIGGER_PIPELINE_NAME: {{alicloud_concourse_target_pipeline_name}}
      TRIGGER_TARGET_PIPELINE: {{alicloud_trigger_target_pipeline}}
      ALICLOUD_ACCESS_KEY_MASTER: {{alicloud_access_key_master}}
      ALICLOUD_SECRET_KEY_MASTER: {{alicloud_secret_key_master}}
      ALICLOUD_ACCESS_KEY_SLAVE:  {{alicloud_access_key_slave}}
      ALICLOUD_SECRET_KEY_SLAVE:  {{alicloud_secret_key_slave}}



jobs:
  - name: All
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 00Mon
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "All"

  - name: Unit
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 00Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_PREFIX: "TestUnit"
          TEST_CASE_CODE: "Alicloud"

  - name: Apigateway
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 00Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Apigateway"
          SWEEPER_CODE: "alicloud_api_gateway"

  - name: CDN
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 01Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "CDN"
          CONCOURSE_TARGET_TRIGGER_PIPELINE_JOB_NAME: "Cdn"

  - name: Cen
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 02Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Cen"
          SWEEPER_CODE: "alicloud_cen_instance"

  - name: CommonBandwidth
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 03Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "CommonBandwidth"
          SWEEPER_CODE: "alicloud_common_bandwidth_package"

  - name: CS
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 04Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "CS"
          SWEEPER_CODE: "alicloud_cs_swarm"

  - name: Datahub
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 05Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Datahub"
          SWEEPER_CODE: "alicloud_datahub_project"

  - name: ALB
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 06Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "ALB"
          SWEEPER_CODE: "alicloud_alb"

  - name: Rds
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 06Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Rds"
          SWEEPER_CODE: "alicloud_db_instance"

  - name: Amqp
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 08Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Amqp"

  - name: Msc
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 09Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Msc"

  - name: DRDS
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 10Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "DRDS"

  - name: EIP
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 11Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "EIP"
          CONCOURSE_TARGET_TRIGGER_PIPELINE_JOB_NAME: "EIP"
          SWEEPER_CODE: "alicloud_eip"

  - name: Ess
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 12Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ess"
          SWEEPER_CODE: "alicloud_ess_scaling_group"
  #
  - name: HBR
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 13Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "HBR"
          SWEEPER_CODE: "alicloud_hbr"

  - name: FC
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 14Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "FC"
          SWEEPER_CODE: "alicloud_fc_service"

  - name: DataWorks
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 15Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "DataWorks"

  - name: KMS
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 16Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "KMS"

  - name: Log
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 17Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Log"
          SWEEPER_CODE: "alicloud_log_project"

  - name: Zones
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 18Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Zones"

  - name: KVStore
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0030Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "KVStore"
          SWEEPER_CODE: "alicloud_kvstore_instance"

  - name: Elasticsearch
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0130Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Elasticsearch"

  - name: CR
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0230Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "CR"

  - name: Oss
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0330Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Oss"
          SWEEPER_CODE: "alicloud_oss_bucket"

  - name: Ots
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0430Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ots"
          SWEEPER_CODE: "alicloud_ots_instance"

  - name: Pvtz
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0530Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Pvtz"
          SWEEPER_CODE: "alicloud_pvtz_zone"

  - name: RAM
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0630Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "RAM"
          SWEEPER_CODE: "alicloud_ram"

  - name: Regions
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0730Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Regions"

  - name: ARMS
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0830Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "ARMS"
          SWEEPER_CODE: "alicloud_arms"

  - name: Cddc
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0930Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Cddc"
          SWEEPER_CODE: "alicloud_cddc"

  - name: Scdn
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 1030Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Scdn"
          SWEEPER_CODE: "alicloud_scdn_domain"

  - name: Lindorm
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 1130Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Lindorm"

  - name: SLB
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 1230Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "SLB"
          SWEEPER_CODE: "alicloud_slb_load_balancer"

  - name: SslVpn
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 1330Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "SslVpn"

  - name: VPC
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 1430Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "VPC"
          SWEEPER_CODE: "alicloud_vpc"

  - name: VPN
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 1530Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "VPN"

  - name: Mns
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 1630Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Mns"

  - name: NAS
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 1730Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "NAS"

  - name: Actiontrail
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 00Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Actiontrail"

  - name: SslCertificates
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 01Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "SslCertificates"

  - name: MongoDB
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 02Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "MongoDB"

  - name: Ddoscoo
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 03Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ddoscoo"

  - name: SAE
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 04Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "SAE"

  - name: EventBridge
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 05Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "EventBridge"

  - name: Cms
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 06Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Cms"

  - name: GPDB
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 07Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "GPDB"

  - name: Ons
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 08Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ons"

  - name: Alikafka
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 09Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Alikafka"

  - name: Ddosbgp
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 10Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ddosbgp"

  - name: Provider
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 11Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Provider"

  - name: Emr
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 12Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Emr"

  - name: CloudConnectNetwork
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 13Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "CloudConnectNetwork"

  - name: Sag
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 14Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Sag"

  - name: YundunDbaudit
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 15Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "YundunDbaudit"
  - name: Bastionhost
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 16Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Bastionhost"

  - name: Market
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 17Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Market"

  - name: PolarDB
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 18Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "PolarDB"

  - name: HBase
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0030Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "HBase"

  - name: ADB
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0130Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "ADB"


  - name: Maxcompute
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0230Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Maxcompute"

  - name: DMS
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0330Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "DMS"

  - name: WAF
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0430Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "WAF"

  - name: Edas
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: false
        resource: 0530Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Edas"

  - name: ResourceManager
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0630Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "ResourceManager"

  - name: Ecs
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0730Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ecs"

  - name: DCDN
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0830Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "DCDN"

  - name: GraphDatabase
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0930Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "GraphDatabase"

  - name: Config
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 1030Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Config"

  - name: Alidns
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 1130Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Alidns"

  - name: MSE
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 1230Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "MSE"

  - name: Fnf
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 1330Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Fnf"

  - name: ROS
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 1430Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "ROS"

  - name: Privatelink
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 1530Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Privatelink"

  - name: CloudFirewall
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 1630Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "CloudFirewall"

  - name: Tsdb
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 1730Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Tsdb"

  - name: Eci
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 00Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Eci"

  - name: OOS
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 01Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "OOS"

  - name: ECD
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 02Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "ECD"

  - name: SDDP
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 03Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "SDDP"

  - name: DirectMail
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 04Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "DirectMail"


  - name: SAS
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 05Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "SAS"

  - name: DFS
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 06Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "DFS"

  - name: Ehpc
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 07Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ehpc"

  - name: IMP
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 08Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "IMP"

  - name: Ga
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 09Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Ga"

  - name: OpenSearch
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 10Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "OpenSearch"

  - name: Eais
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 11Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Eais"

  - name: Sddp
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 12Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "Sddp"

  - name: SimpleApplicationServer
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 13Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "SimpleApplicationServer"

  - name: DTS
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 14Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "DTS"

  - name: ExpressConnect
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 15Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "ExpressConnect"

  - name: ServiceMesh
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 16Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "ServiceMesh"

  - name: ClickHouse
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 17Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "ClickHouse"

  - name: DBFS
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 18Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "DBFS"

  - name: CloudSSO
    plan:
      - <<: *clone-provider
      - get: trigger
        trigger: true
        resource: 0030Thu
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          TEST_CASE_CODE: "DBFS"

  - name: SweeperAfter
    plan:
      - get: terraform-provider-alicloud
        resource: terraform-provider-alicloud
        trigger: true
        passed: [
            HBR, Ess, CS, FC, Ecs,
            VPC, EIP, Cddc, ARMS, Scdn, Amqp, CommonBandwidth,
            SLB, ALB, KVStore, DRDS, Apigateway, Ots, Elasticsearch, VPN, SslVpn, MongoDB, SAE, EventBridge
        ]
      - aggregate:
          - *get-aliyun-cli
      - <<: *run
        params:
          <<: *run-params
          SWEEPER: true
          TEST_CASE_CODE: "-"
          TEST_SWEEPER_CASE_CODE: "alicloud_vpc"

resources:
  - name: terraform-provider-alicloud
    type: git
    source:
      uri: https://github.com/aliyun/terraform-provider-alicloud.git
      branch: master

  - name: aliyun-cli
    type: s3
    source:
      access_key_id: {{aliyun_cli_access_key}}
      secret_access_key: {{aliyun_cli_secret_key}}
      bucket: {{aliyun_cli_bucket}}
      regexp: .*-cli-linux-3\.0\.(\d+)-amd64\.tgz
      region_name: {{aliyun_cli_region}}
      endpoint: oss-((aliyun_cli_region)).aliyuncs.com

  - name: 00Mon
    type: time
    source:
      start: 00:00 AM
      days: [Monday]
      location: {{time_location}}

  - name: 00Thu
    type: time
    source:
      start: 00:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 0030Thu
    type: time
    source:
      start: 00:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 01Thu
    type: time
    source:
      start: 01:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 0130Thu
    type: time
    source:
      start: 01:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 02Thu
    type: time
    source:
      start: 02:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 0230Thu
    type: time
    source:
      start: 02:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 03Thu
    type: time
    source:
      start: 03:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 0330Thu
    type: time
    source:
      start: 03:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 04Thu
    type: time
    source:
      start: 04:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 0430Thu
    type: time
    source:
      start: 04:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 05Thu
    type: time
    source:
      start: 05:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 0530Thu
    type: time
    source:
      start: 05:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 06Thu
    type: time
    source:
      start: 06:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 0630Thu
    type: time
    source:
      start: 06:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 07Thu
    type: time
    source:
      start: 07:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 0730Thu
    type: time
    source:
      start: 07:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 08Thu
    type: time
    source:
      start: 08:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 0830Thu
    type: time
    source:
      start: 08:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 09Thu
    type: time
    source:
      start: 09:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 0930Thu
    type: time
    source:
      start: 09:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 10Thu
    type: time
    source:
      start: 10:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 1030Thu
    type: time
    source:
      start: 10:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 11Thu
    type: time
    source:
      start: 11:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 1130Thu
    type: time
    source:
      start: 11:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 12Thu
    type: time
    source:
      start: 12:00 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 1230Thu
    type: time
    source:
      start: 12:30 AM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 13Thu
    type: time
    source:
      start: 01:00 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 1330Thu
    type: time
    source:
      start: 10:30 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 14Thu
    type: time
    source:
      start: 02:00 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 1430Thu
    type: time
    source:
      start: 02:30 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 15Thu
    type: time
    source:
      start: 03:00 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 1530Thu
    type: time
    source:
      start: 03:30 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 16Thu
    type: time
    source:
      start: 04:00 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 1630Thu
    type: time
    source:
      start: 04:30 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 17Thu
    type: time
    source:
      start: 05:00 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 1730Thu
    type: time
    source:
      start: 05:30 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}

  - name: 18Thu
    type: time
    source:
      start: 06:00 PM
      stop: 10:50 PM
      days: [Thursday]
      location: {{time_location}}